# =============================================================================
# CareDroid Backend - Environment Configuration
# =============================================================================
# Copy this file to .env and configure with your values
# NEVER commit .env to version control!

# -----------------------------------------------------------------------------
# General
# -----------------------------------------------------------------------------
NODE_ENV=development
# PORT=8000 - DO NOT CHANGE: Port 8000 is hardcoded and enforced for security
PORT=8000
FRONTEND_URL=http://localhost:8000

# -----------------------------------------------------------------------------
# Database (PostgreSQL or SQLite)
# -----------------------------------------------------------------------------
# Option 1: PostgreSQL (production)
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_USER=postgres
DATABASE_PASSWORD=postgres
DATABASE_NAME=caredroid
DATABASE_SSL=false
DATABASE_LOGGING=false
DATABASE_POOL_SIZE=10

# Option 2: SQLite (development fallback)
DATABASE_CLIENT=sqlite
SQLITE_PATH=caredroid.dev.sqlite

# -----------------------------------------------------------------------------
# Redis
# -----------------------------------------------------------------------------
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=redis_password
REDIS_DB=0

# -----------------------------------------------------------------------------
# Authentication (JWT)
# -----------------------------------------------------------------------------
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_ACCESS_EXPIRY=15m
JWT_REFRESH_EXPIRY=30d

# -----------------------------------------------------------------------------
# Session Management
# -----------------------------------------------------------------------------
SESSION_IDLE_TIMEOUT=1800000
SESSION_ABSOLUTE_TIMEOUT=28800000

# -----------------------------------------------------------------------------
# Google OAuth
# -----------------------------------------------------------------------------
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_CALLBACK_URL=http://localhost:8000/api/auth/google/callback

# -----------------------------------------------------------------------------
# LinkedIn OAuth
# -----------------------------------------------------------------------------
LINKEDIN_CLIENT_ID=your-linkedin-client-id
LINKEDIN_CLIENT_SECRET=your-linkedin-client-secret
LINKEDIN_CALLBACK_URL=http://localhost:8000/api/auth/linkedin/callback

# -----------------------------------------------------------------------------
# Email (SMTP)
# -----------------------------------------------------------------------------
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=apikey
SMTP_PASSWORD=your-sendgrid-api-key
SMTP_FROM_EMAIL=noreply@caredroid.health
EMAIL_VERIFICATION_EXPIRY=60
PASSWORD_RESET_EXPIRY=30

# -----------------------------------------------------------------------------
# Stripe Payment Processing
# -----------------------------------------------------------------------------
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret

# Stripe Price IDs
STRIPE_PRICE_FREE=price_free
STRIPE_PRICE_PRO=price_professional
STRIPE_PRICE_INSTITUTIONAL=price_institutional

# Stripe URLs
STRIPE_SUCCESS_URL=http://localhost:8000/subscription/success
STRIPE_CANCEL_URL=http://localhost:8000/subscription/cancel

# -----------------------------------------------------------------------------
# OpenAI Integration
# -----------------------------------------------------------------------------
OPENAI_API_KEY=sk-your-openai-api-key
OPENAI_MODEL=gpt-4-turbo-preview
OPENAI_TEMPERATURE=0.7
OPENAI_MAX_TOKENS=2000

# Rate Limits (queries per day)
OPENAI_RATE_LIMIT_FREE=10
OPENAI_RATE_LIMIT_PRO=1000
OPENAI_RATE_LIMIT_INSTITUTIONAL=10000

# -----------------------------------------------------------------------------
# Encryption (AES-256)
# -----------------------------------------------------------------------------
# CRITICAL: Must be exactly 32 characters for AES-256
ENCRYPTION_KEY=CHANGE_ME_32_CHARACTER_KEY_NOW!

# CRITICAL: Encryption Master Key for at-rest encryption (hex 64 chars = 32 bytes)
ENCRYPTION_MASTER_KEY=0000000000000000000000000000000000000000000000000000000000000000
ENCRYPTION_ALGORITHM=aes-256-gcm
ENCRYPTION_KEY_VERSION=1

# =============================================================================
# Firebase Push Notifications
# =============================================================================
# JSON service account key from Firebase Console
# An example would look like: {"type":"service_account","project_id":"your-project",...}
FIREBASE_SERVICE_ACCOUNT=

# Firebase Configuration
FIREBASE_PROJECT_ID=
FIREBASE_STORAGE_BUCKET=
FIREBASE_MESSAGING_SENDER_ID=

# =============================================================================
# RAG (Retrieval Augmented Generation) & Pinecone
# =============================================================================
PINECONE_API_KEY=
PINECONE_ENVIRONMENT=us-east-1-aws
PINECONE_INDEX_NAME=caredroid-medical-knowledge
PINECONE_NAMESPACE=medical-docs
RAG_MODEL=text-embedding-ada-002
RAG_ENABLED=true

# =============================================================================
# Machine Learning & Anomaly Detection
# =============================================================================
ANOMALY_DETECTION_URL=http://anomaly-detection:5000
ANOMALY_DETECTION_ENABLED=true
NLU_SERVICE_URL=http://nlu-service:5001
NLU_SERVICE_ENABLED=true

# =============================================================================
# Monitoring & Error Tracking (Optional)
# =============================================================================
SENTRY_DSN=
DATADOG_API_KEY=
DATADOG_APP_KEY=
DATADOG_SITE=datadoghq.com
DATADOG_APM_ENABLED=true
DATADOG_PROFILING_ENABLED=false

# =============================================================================
# Logging & Observability
# =============================================================================
LOG_LEVEL=debug
ELASTICSEARCH_HOST=elasticsearch
ELASTICSEARCH_PORT=9200
LOGSTASH_HOST=logstash
LOGSTASH_PORT=5000
